@model Licenta1.Models.ProgViewModel
@{
    ViewBag.Title = "Programare";
}

<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        //your code here

        $('#Data').change(function () {
            //    alert('Changed!');
            var par = $(this).val();
            $.getJSON('/prog/filteredvalues', { date: par }, function (result) {
                var ddl = $('#ore');
                ddl.empty();
                $(result).each(function () {
                    $(document.createElement('option'))
                        .attr('value', this.Value)
                        .text(this.Text)
                        .appendTo(ddl);
                });
            });
        });

        function getHour() {
            alert('ore');
        }

    });



</script>
<br />
<br />

<h2>Programare nouă</h2>

<h3>@ViewBag.Success</h3>
@using (Html.BeginForm("SaveProg", "Prog", new { hour = "javascript:getHour();" }, FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        @*<h4>Programare</h4>*@
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

        <div class="form-group">
            @Html.LabelFor(model => model.Data,"Alege data programării*", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Data, new { htmlAttributes = new { @class = "form-control" }, onchange = "OnChangeEvent()" })
                @Html.ValidationMessageFor(model => model.Data, "", new { @class = "text-danger" })
            </div>
        </div>

       
            
            @*Html.LabelFor(model => model, "Ora", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.DropDownListFor(model => model.Ora, Model.Ora, "Select", new { id = "ore" })
                    @Html.ValidationMessageFor(model => model.Ora, "", new { @class = "text-danger" })
                </div>*@
        <div class="form-group">
            @Html.LabelFor(model => model, "Alege ora*", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownListFor(model => model.SelectedHour, Model.Ora, "Selectează ora disponibilă", new { id = "ore" })
                @Html.ValidationMessageFor(model => model.Ora, "", new { @class = "text-danger" })
            </div>
        </div>


            <div class="form-group">
                @Html.LabelFor(model => model, "Alege procedura*", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.DropDownListFor(model => model.SelectedProcedure, Model.ServiciuProcedura, "Selectează procedura")
                    @Html.ValidationMessageFor(model => model.ServiciuProcedura, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>

        <div class="form-group">
            @* <div class="form-group">
                    @Html.LabelFor(model => model, "Ora", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.DropDownList("Ora")

                    </div>
                </div>*@

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Trimite" class="btn btn-default" />
                </div>
            </div>
        </div>

    @*foreach (var item in ViewBag.ore)
        {
            @item
        }*@


}
<br />
<br />
<br />
<div>
    <br />
    <br />

    @Html.ActionLink("Înapoi la pagina principală", "Index")
</div>


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

